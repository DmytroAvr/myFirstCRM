{# oids/templates/oids/base.html #}
{% load static %}
<!DOCTYPE html>
<html lang="uk">

<head>
	<meta charset="UTF-8">
	<title>{% block title %}Управління ОІД{% endblock %}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" sizes="16x16" href="{% static 'oids/favicon-32x32.png' %}">
	<link rel="icon" type="image/png" sizes="16x16" href="{% static 'oids/favicon-16x16.png' %}">

	{# Bootstrap CSS #}
	<link rel="stylesheet" href="{% static 'oids/css/bootstrap.min.css' %}">
	<link rel="stylesheet" href="{% static 'oids/css/tom-select.default.min.css' %}">
	<link rel="stylesheet" href="{% static 'oids/css/style.css' %}">
	{# TODO: Додайте сюди посилання на CSS для Tom Select, коли будете його інтегрувати #}
	{# #}
	<!-- <script src="{% static 'oids/js/jquery-3.7.1.min.js' %}"></script> -->
	<script src="{% static 'oids/js/bootstrap.bundle.min' %}"></script>
	<script src="{% static 'oids/js/tom-select.complete.min.js' %}"></script>
</head>

<body>
	<div class="container">
		<header class="header py-3 mb-4 border-bottom">
			<nav class="mb-3">
			<ul class="nav nav-pills">
				<li class="nav-item">
					<a href="{% url 'oids:main_dashboard' %}" class="menu__link">ГОЛОВНА</a>					
				</li>
				<li class="nav-item">					
						<div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								ТЗ
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:technical_task_create' %}" class="nav-link">Дадати ТЗ</a>
								<a href="{% url 'oids:technical_task_process_select' %}" class="nav-link">Відправити ТЗ (опрацювати)</a>
							</div>
						</div>
				</li>
				<li>
					<div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								Заявки / Планування
							</button>
								<div class="menu__content">
									<a href="{% url 'oids:add_work_request' %}" class="nav-link">Додати заявку</a>
									<a href="{% url 'oids:plan_trip_view_name' %}" class="nav-link">Запланувати відрядження</a>
									<a href="{% url 'oids:technical_task_control' %}" class="nav-link">Контроль опрацювання ТЗ</a>
									<a href="{% url 'oids:processing_control_dashboard' %}" class="nav-link">Контроль опрацювання Документів</a>
								</div>
							
						</div></li>
				<li><div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								опрацювання документів / відправка в частину
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:add_document_processing_view_name' %}" class="nav-link">Додати опрацювання документів</a>
								<a href="{% url 'oids:send_trip_results_form' %}" class="nav-link">Відправити документи в частину</a> 

							</div>
						</div>
					</li>
				<li><div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								до ДССЗЗІ
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:update_oid_status' %}" class="nav-link">Змінити статус ОІД</a>
								<div>
									<h5>Відправка на реєстрацію</h5>
									<ul>										
										<li><a href="{% url 'oids:send_attestation_for_registration' %}" class="nav-link">Реєстрація АА</a></li>
										<li><a href="{% url 'oids:send_azr_for_registration' %}" class="nav-link">Реєстрація АЗР</a></li>
										<li><a href="{% url 'oids:send_declaration_for_registration' %}" class="nav-link">Реєстрація Декларації</a></li>
									</ul>
								</div>
								<div>
									<h5>Внесення відповіді</h5>
									<ul>
										<li><a href="{% url 'oids:record_attestation_response' %}" class="nav-link">Зареєстрований № АА</a></li>
										<li><a href="{% url 'oids:list_azr_registrations' %}" class="nav-link">Зареєстрований № АЗР</a></li>
										<li><a href="{% url 'oids:list_declaration_registrations' %}" class="nav-link">Зареєстрований № Декларації</a></li>
									</ul>
								</div>
							</div>
						</div></li>

			</ul>
		</nav>

			<h1 class="h3">{% block page_title %}Панель керування ОІД{% endblock %}</h1>
		</header>

		

		{% if messages %}
		<div id="messages" class="messages-container">
			{% for message in messages %}
			<div class="alert alert-{{ message.tags|lower }}{% if message.tags == 'error' %} alert-danger{% elif message.tags == 'success'%} alert-success{% elif message.tags == 'warning'%} alert-warning{% else %} alert-info{% endif %} alert-dismissible fade show" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endfor %}
		</div>
		{% endif %}

		<main class="content">
			{% block content %}
			{% endblock %}
		</main>
	</div>

	<footer class="footer mt-auto py-3 bg-light">
		<div class="container text-center">
			<nav class="mb-2">
				<ul class="nav justify-content-center">
					<li class="nav-item px-4"><a href="{% url 'oids:summary_information_hub' %}" class="nav-link px-2 btn btn-primary">Переглянути все</a></li>
					<li class="nav-item px-4"><a href="{% url 'oids:oid_create' %}" class="nav-link px-2 btn btn-primary">Створити ОІД</a></li>
				</ul>
			</nav>
			<span class="text-muted">&copy; {% now "Y" %} Ваш Проект</span>
		</div>

	<div class="user-nav" style="text-align: center; padding: 10px;">
    {% if user.is_authenticated %}
        Вітаємо, {{ user.username }}!
  
        <form method="post" action="{% url 'logout' %}" style="display: inline; margin-left: 10px;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-outline-secondary">Вийти</button>
        </form>
        
        {# Посилання на зміну пароля (якщо потрібно) #}
        <a href="{% url 'password_change' %}" class="btn btn-sm btn-outline-info ms-2">Змінити пароль</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn btn-sm btn-outline-primary">Увійти</a>
        {# Якщо є реєстрація: #}
        {# <a href="{% url 'oids:register' %}" class="btn btn-sm btn-primary ms-2">Реєстрація</a> #}
    {% endif %}
	</div>
	</footer>



	<script src="{% static 'oids/js/main.js' %}"></script>

	{% block extra_js %}

{% endblock %}

</body>

</html>