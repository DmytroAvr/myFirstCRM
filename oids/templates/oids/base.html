{# oids/templates/oids/base.html #}
{% load static %}
<!DOCTYPE html>
<html lang="uk">

<head>
	<meta charset="UTF-8">
	<title>{% block title %}Управління ОІД{% endblock %}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" sizes="16x16" href="{% static 'totalFiles/favicon-32x32.png' %}">
	<link rel="icon" type="image/png" sizes="16x16" href="{% static 'totalFiles/favicon-16x16.png' %}">

	{# Bootstrap CSS #}
	<link rel="stylesheet" href="{% static 'totalFiles/css/bootstrap.min.css' %}">
	<link rel="stylesheet" href="{% static 'totalFiles/css/tom-select.default.min.css' %}">
	<link rel="stylesheet" href="{% static 'totalFiles/css/style.css' %}">
	<link rel="stylesheet" href="{% static 'oids/css/style.css' %}">
	{# TODO: Додайте сюди посилання на CSS для Tom Select, коли будете його інтегрувати #}
	{# #}

	<script src="{% static 'totalFiles/js/bootstrap.bundle.min.js' %}"></script>
	<script src="{% static 'totalFiles/js/tom-select.complete.min.js' %}"></script>

	<style>
		.taskflow-link {
			background: linear-gradient(135deg, var(--taskflow-color) 0%, #a78bfa 100%) !important;
			box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
		}
		.taskflow-link__header {
			padding-top: 10px ;
			padding-bottom: 5px ;
			margin-bottom: 10px;
		}

		.taskflow-link:hover {
			transform: translateY(-2px) scale(1.05);
			box-shadow: 0 6px 16px rgba(139, 92, 246, 0.5);
		}

</style>
</head>

<body>
	<div class="container">
		<header class="header py-3 mb-4 border-bottom">
			<nav class="mb-3">
				<a href="{% url 'taskFlow:project_list' %}" class="menu__link taskflow-link taskflow-link__header">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
						<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
					TaskFlow
				</a>
			<ul class="nav nav-pills">
				<li class="nav-item">
					<a href="{% url 'oids:main_dashboard' %}" class="menu__link" style="font-size: 1.2em;">ГОЛОВНА</a>					
				</li>
				
				<li class="nav-item">					
						<div class="menu ">
							<button class="menu__button" style="max-width: 9em;">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								ТЗ
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:technical_task_create' %}" class="nav-link">Дадати ТЗ</a>
								<a href="{% url 'oids:technical_task_process_select' %}" class="nav-link">Відправити ТЗ (опрацювати)</a>
							</div>
						</div>
				</li>
				<li>
					<div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								Заявки / Планування
							</button>
								<div class="menu__content">
									<a href="{% url 'oids:add_work_request' %}" class="nav-link">Додати заявку</a>
									<a href="{% url 'oids:list_work_requests' %}" class="nav-link">Всі заявки</a>
									<a href="{% url 'oids:plan_trip_view_name' %}" class="nav-link">Запланувати відрядження</a>
									<a href="{% url 'oids:technical_task_control' %}" class="nav-link">Контроль опрацювання ТЗ</a>
									<a href="{% url 'oids:processing_control_dashboard' %}" class="nav-link">Контроль опрацювання Документів</a>
								</div>
							
						</div></li>
				<li><div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								опрацювання документів / відправка в частину
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:add_document_processing_view_name' %}" class="nav-link">Додати опрацювання документів</a>
								<a href="{% url 'oids:bulk_add_documents' %}" class="nav-link">Додати документів без заявки</a>
								<a href="{% url 'oids:send_trip_results_form' %}" class="nav-link">Відправити документи в частину</a> 
							</div>
						</div>
					</li>
				<li>
					<div class="menu">
							<button class="menu__button">
								<svg class="menu__button-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 24"
									stroke-width="1.5" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>
								до ДССЗЗІ
							</button>
							<div class="menu__content">
								<a href="{% url 'oids:update_oid_status' %}" class="nav-link">Змінити статус ОІД</a>
								<div>
									<h5>Відправка на реєстрацію</h5>
									<ul>										
										<li><a href="{% url 'oids:send_attestation_for_registration' %}" class="nav-link">Реєстрація АА</a></li>
										<li><a href="{% url 'oids:send_azr_for_registration' %}" class="nav-link">Реєстрація АЗР</a></li>
										<li><a href="{% url 'oids:send_declaration_for_registration' %}" class="nav-link">Реєстрація Декларації</a></li>
									</ul>
								</div>
								<div>
									<h5>Внесення відповіді</h5>
									<ul>
										<li><a href="{% url 'oids:record_attestation_response' %}" class="nav-link">Зареєстрований № АА</a></li>
										<li><a href="{% url 'oids:list_azr_registrations' %}" class="nav-link">Зареєстрований № АЗР</a></li>
										<li><a href="{% url 'oids:list_declaration_registrations' %}" class="nav-link">Зареєстрований № Декларації</a></li>
									</ul>
								</div>
							</div>
						</div></li>

			</ul>
		</nav>

			<h1 class="h3">{% block page_title %}Панель керування ОІД{% endblock %}</h1>
		</header>

		

		{% if messages %}
		<div id="messages" class="messages-container">
			{% for message in messages %}
			<div class="alert alert-{{ message.tags|lower }}{% if message.tags == 'error' %} alert-danger{% elif message.tags == 'success'%} alert-success{% elif message.tags == 'warning'%} alert-warning{% else %} alert-info{% endif %} alert-dismissible fade show" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endfor %}
		</div>
		{% endif %}

		<main class="content">
			{% block content %}
			{% endblock %}
		</main>
	</div>

	<footer class="footer mt-auto py-3 bg-light">
		<div class="container text-center">
			<nav class="mb-2">
				<ul class="nav justify-content-center">
					<li class="nav-item px-2">
						<a href="{% url 'oids:summary_information_hub' %}" class="nav-link px-2 btn btn-primary">
							<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;">
								<path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
								<path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
							</svg>
							Переглянути все
						</a>
					</li>
					<li class="nav-item px-2">
						<a href="{% url 'oids:oid_create' %}" class="nav-link px-2 btn btn-primary">
							<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;">
								<path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
							</svg>
							Створити ОІД
						</a>
					</li>
					<!-- <li class="nav-item px-2">
						<a href="{% url 'taskFlow:project_list' %}" class="nav-link px-2 btn taskflow-link" >
							<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;">
								<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							Відкрити TaskFlow
						</a>
					</li> -->
				</ul>
			</nav>
			<div class="text-muted"><div>&copy; {% now "Y" %} TZIFlow. Всі права захищені.
							<p>Дмитро АВРАЩЕНКО</p>
						</div></div>
		</div>

	<div class="user-nav" style="text-align: center; padding: 10px;">
    {% if user.is_authenticated %}
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
					<path d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z" />
				</svg>
				Вітаємо, <strong>{{ user.username }}</strong>!
		  
  
				<form method="post" action="{% url 'logout' %}" style="display: inline; margin-left: 10px;">
					{% csrf_token %}
					<button type="submit" class="btn btn-sm btn-outline-dark">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;">
							<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
						</svg>
						Вийти
					</button>
				</form>
        
        {# Посилання на зміну пароля (якщо потрібно) #}
        <a href="{% url 'password_change' %}" class="btn btn-sm btn-outline-dark ms-2">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;">
						<path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
					</svg>
					Змінити пароль
				</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn btn-sm btn-outline-light">Увійти</a>
        {# Якщо є реєстрація: #}
        {# <a href="{% url 'oids:register' %}" class="btn btn-sm btn-primary ms-2">Реєстрація</a> #}
    {% endif %}
	</div>
	</footer>



	<script src="{% static 'oids/js/main.js' %}"></script>

	{% block extra_js %}

{% endblock %}

</body>

</html>