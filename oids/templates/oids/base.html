{# oids/templates/oids/base.html (або main_dashboard.html) #}
{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Управління ОІД{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'oids/css/style.css' %}"> 
    <link rel="stylesheet" href="{% static 'oids/css/select2.min.css' %}">
    {% comment %}
        Це коментар у шаблоні Django
    {% endcomment %}
 
    {# <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  #}
    <script src="{% static 'oids/js/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'oids/js/select2.min.js' %}"></script>
    <script src="{% static 'oids/js/select2-uk.min.js' %}"></script>
    
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>{% block page_title %}Панель керування ОІД{% endblock %}</h1>
        </header>

        <div class="nav-buttons">
            <a href="{{ add_request_url }}">Додати заявку</a>
            <a href="{{ plan_trip_url }}">Запланувати відрядження</a>
            <a href="{{ add_document_processing_url }}">Додати опрацювання документів</a>
        </div>

        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% block content %}
        {% endblock %}
     </div>

   
    <script>
        window.AJAX_LOAD_OIDS_CATEGORIZED_URL = "{% url 'oids:ajax_load_oids_categorized' %}";
        // Також для інших AJAX URL, якщо потрібно
    </script>
    <script src="{% static 'oids/js/select2-init.js' %}"></script>
    <script src="{% static 'oids/js/filtering_dynamic.js' %}"></script>
    <script src="{% static 'oids/js/main.js' %}"></script> {# Якщо є головний JS файл #}
    <script>
        $(document).ready(function() {
    console.log("Document ready. Initializing Select2...");
    if (typeof initSelect2Fields === 'function') {
        initSelect2Fields(document); // Ініціалізуємо всі Select2 на сторінці
        console.log("Select2 fields should be initialized now.");
    } else {
        console.warn("Function initSelect2Fields from select2-init.js not found.");
    }
    
    console.log("Initializing dynamic filters...");
    if (typeof initializeDynamicFilters === 'function') {
        // Можливо, додати невелику затримку, щоб Select2 гарантовано завершив усі свої маніпуляції з DOM
        setTimeout(function() {
            initializeDynamicFilters();
            console.log("Dynamic filters initialized.");
        }, 100); // 100мс зазвичай достатньо
    } else {
        console.warn("Function initializeDynamicFilters from filtering_dynamic.js not found.");
    }
});
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>



 