<!-- C:\myFirstCRM\oids\templates\oids\work_request.html -->
{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}–í—ñ–¥—Ä—è–¥–∂–µ–Ω–Ω—è. –°–ø–ª–∞–Ω—É–≤–∞—Ç–∏{% endblock %}

{% block content %}
<form method="post">
    {% csrf_token %}

    <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç</h3>
    {{ header_form.as_p }}

    <h3>–û–Ü–î –≤ –∑–∞—è–≤—Ü—ñ:</h3>
    <div id="formset">
        {{ formset.management_form }}

        {% for form in formset %}
        <div class="document-form" data-form-index="{{ forloop.counter0 }}" style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
            <div class="form-row">
                <label for="{{ form.oid.id_for_label }}">–û–±‚Äô—î–∫—Ç —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ:</label>
                {% render_field form.oid class="oid-select" %}
            </div>
            <div class="form-row">
                <label for="{{ form.work_type.id_for_label }}">–¢–∏–ø —Ä–æ–±–æ—Ç–∏:</label>
                {% render_field form.work_type %}
            </div>
            <button type="button" class="add-oid-button">‚ûï –î–æ–¥–∞—Ç–∏ –û–Ü–î</button>
            <button type="button" class="remove-form">üóë –í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –ø–æ–ª–µ</button>
        </div>
        {% endfor %}
    </div>

    <button type="button" id="add-form">‚ûï –î–æ–¥–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç</button>
    <br><br>
    <button type="submit" style="background-color: #ddf5a5;">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏</button>
</form>

<!-- —à–∞–±–ª–æ–Ω –ø—É—Å—Ç–æ—ó —Ñ–æ—Ä–º–∏ -->
<div id="empty-form-template" style="display: none;">
    <div class="document-form" data-form-index="__prefix__" style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
        <div class="form-row">
            <label for="id_form-__prefix__-oid">–û–±‚Äô—î–∫—Ç —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ:</label>
            {% render_field empty_form.oid name="form-__prefix__-oid" id="id_form-__prefix__-oid" class="oid-select" %}
        </div>
        <div class="form-row">
            <label for="id_form-__prefix__-work_type">–¢–∏–ø —Ä–æ–±–æ—Ç–∏:</label>
            {% render_field empty_form.work_type name="form-__prefix__-work_type" id="id_form-__prefix__-work_type" %}
        </div>
        <button type="button" class="add-oid-button">‚ûï –î–æ–¥–∞—Ç–∏ –û–Ü–î</button>
        <button type="button" class="remove-form">üóë –í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –ø–æ–ª–µ</button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'oids/js/script_work_request.js' %}"></script>
{% endblock %}
