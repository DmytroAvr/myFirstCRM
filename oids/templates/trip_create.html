
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Відрядження</title>
  <style>
    :root {
      --bg-light: #ffffff;
      --bg-dark: #1a1a1a;
      --text-light: #1a1a1a;
      --text-dark: #f0f0f0;
      --input-bg-light: #f9f9f9;
      --input-bg-dark: #2c2c2c;
      --border-light: #cccccc;
      --border-dark: #444444;
      --btn-bg-light: #e0e0e0;
      --btn-bg-dark: #333333;
      --btn-text-light: #000;
      --btn-text-dark: #fff;
    }

    body {
      margin: 20px;
      font-family: sans-serif;
      background-color: var(--bg-light);
      color: var(--text-light);
      transition: background-color 0.3s, color 0.3s;
    }

    .dark-theme {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    .theme-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: transparent;
      color: inherit;
      border: 1px solid currentColor;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 0.9rem;
      border-radius: 5px;
    }

    form {
      max-width: 800px;
      margin: auto;
    }

    label {
      display: block;
      margin-top: 1rem;
      margin-bottom: 0.3rem;
    }

    select,
    input[type="date"],
    textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid var(--border-light);
      background-color: var(--input-bg-light);
      color: var(--text-light);
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }

    .dark-theme select,
    .dark-theme input[type="date"],
    .dark-theme textarea {
      background-color: var(--input-bg-dark);
      color: var(--text-dark);
      border: 1px solid var(--border-dark);
    }

    button[type="submit"] {
      margin-top: 20px;
      padding: 10px 18px;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      border: 1px solid var(--border-light);
      background-color: var(--btn-bg-light);
      color: var(--btn-text-light);
      transition: background-color 0.3s, color 0.3s;
    }

    .dark-theme button[type="submit"] {
      background-color: var(--btn-bg-dark);
      color: var(--btn-text-dark);
      border: 1px solid var(--border-dark);
    }
  </style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()">Змінити тему</button>
<script>

     function toggleTheme() {
    document.body.classList.toggle('dark-theme');
  }
</script>

{% block content %}
              {% if messages %}
                  {% for message in messages %}
                      <div class="alert alert-success">{{ message }}</div>
                  {% endfor %}
              {% endif %}
  <h2>Планування відрядження</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Зберегти</button>
  </form>
{% endblock %}



<!-- select2 -->
<script>
    $(document).ready(function() {
        $('select').select2();
    });
</script> 
<script>
    // script for select2 with search
    $(document).ready(function() {
    $('select').select2();
        $('#id_units').on('change', function() {
            const unitIds = $(this).val();
            if (!unitIds.length) return;

            $.ajax({
                url: "{% url 'ajax_load_oids_for_units' %}",
                data: {
                    'units[]': unitIds
                },
                success: function(data) {
                    const $oidSelect = $('#id_oids');
                    $oidSelect.empty();
                    data.forEach(function(oid) {
                        $oidSelect.append($('<option>', {
                            value: oid.id,
                            text: oid.name
                        }));
                    });
                    $oidSelect.trigger('change');
                }
            });
        });
    });
</script>


<!-- autocomplete off -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll("form").forEach(form => {
            form.setAttribute("autocomplete", "off");
        });
    });
</script>

</body>