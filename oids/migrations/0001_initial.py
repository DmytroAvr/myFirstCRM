# Generated by Django 5.2.1 on 2025-05-21 08:30

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AttestationRegistration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('registration_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='Реєстраційний номер листа до ДССЗЗІ')),
                ('process_date', models.DateField(verbose_name='Дата відправки на реєстрацію в ДССЗЗІ')),
                ('attachment', models.FileField(blank=True, null=True, upload_to='attestation_docs/', verbose_name='Файл (опційно)')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітка')),
            ],
        ),
        migrations.CreateModel(
            name='DocumentType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('oid_type', models.CharField(choices=[('МОВНА', 'МОВНА'), ('ПЕМІН', 'ПЕМІН'), ('Спільний', 'Спільний')], max_length=20, verbose_name='Тип ОІД')),
                ('work_type', models.CharField(choices=[('Атестація', 'Атестація'), ('ІК', 'ІК'), ('Спільний', 'Спільний')], max_length=20, verbose_name='Тип робіт')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Назва документа')),
                ('valid_days', models.PositiveIntegerField(default=0, help_text='Наприклад, 20 або 60. Якщо не обмежений — залишити 0.', verbose_name='Строк дії (у місяцях)')),
            ],
        ),
        migrations.CreateModel(
            name='Person',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name="Призвище, ім'я")),
                ('position', models.CharField(max_length=255, verbose_name='Посада')),
            ],
        ),
        migrations.CreateModel(
            name='Unit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('management_unit', models.CharField(choices=[('ПівнічнеТУ', 'ПівнічнеТУ'), ('ПівденнеТУ', 'ПівденнеТУ'), ('ЗахіднеТУ', 'ЗахіднеТУ'), ('СхіднеТУ', 'СхіднеТУ'), ('ЦентральнеТУ', 'ЦентральнеТУ')], max_length=50, verbose_name='Управління')),
                ('name', models.CharField(max_length=255, verbose_name='Військова частина')),
                ('city', models.CharField(max_length=25, verbose_name='Місто')),
                ('distance', models.CharField(max_length=10, verbose_name='відстань КМ')),
                ('directionGroup', models.CharField(max_length=10, verbose_name='грапа частин в які часто їдимо')),
            ],
        ),
        migrations.CreateModel(
            name='AttestationItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_number', models.CharField(max_length=50, verbose_name='Номер Акту Атестації')),
                ('registration', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.attestationregistration')),
            ],
        ),
        migrations.CreateModel(
            name='AttestationResponse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('registered_number', models.CharField(max_length=50, verbose_name='Зареєстровано за номером')),
                ('registered_date', models.DateField(verbose_name='Дата реєстрації')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітка')),
                ('recorded_date', models.DateField(auto_now_add=True, verbose_name='Дата внесення')),
                ('registration', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='oids.attestationregistration')),
            ],
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('oid_type', models.CharField(choices=[('ПЕМІН', 'ПЕМІН'), ('МОВНА', 'МОВНА')], default='ПЕМІН', max_length=20, verbose_name='Тип ОІД')),
                ('work_type', models.CharField(choices=[('Атестація', 'Атестація'), ('ІК', 'ІК')], default='ІК', max_length=20, verbose_name='Тип роботи')),
                ('document_number', models.CharField(default='27/14-', max_length=50, verbose_name='Підготовлений № документа')),
                ('process_date', models.DateField(verbose_name='Дата опрацювання')),
                ('work_date', models.DateField(verbose_name='Дата проведення робіт')),
                ('author', models.CharField(max_length=255, verbose_name='Виконавець (ПІБ)')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітки')),
                ('created_at', models.DateField(auto_now_add=True, verbose_name='Дата внесення в систему')),
                ('document_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.documenttype', verbose_name='Документ')),
            ],
        ),
        migrations.CreateModel(
            name='OID',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Назва')),
                ('room', models.CharField(max_length=255, verbose_name='Приміщення №')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітка')),
                ('oid_type', models.CharField(choices=[('ПЕМІН', 'ПЕМІН'), ('МОВНА', 'МОВНА')], default='ПЕМІН', max_length=10, verbose_name='Тип ОІД')),
                ('status', models.CharField(choices=[('створюється', 'Створюється'), ('атестована', 'атестована'), ('в експлуатації', 'В експлуатації'), ('обробка призупинена', 'обробка призупинена'), ('скасовано', 'скасовано')], default='створюється', max_length=30, verbose_name='Поточний стан ОІД')),
                ('created_by_document', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='first_doc_for_oid', to='oids.document', verbose_name='Перший документ (Атестація/ІК)')),
                ('latest_document', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='latest_doc_for_oid', to='oids.document', verbose_name='Останній документ')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.unit', verbose_name='Військова частина')),
            ],
        ),
        migrations.AddField(
            model_name='document',
            name='oid',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.oid', verbose_name='ОІД'),
        ),
        migrations.AddField(
            model_name='attestationregistration',
            name='oids',
            field=models.ManyToManyField(through='oids.AttestationItem', to='oids.oid', verbose_name='ОІД що реєструються'),
        ),
        migrations.AddField(
            model_name='attestationitem',
            name='oid',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.oid', verbose_name='ОІД'),
        ),
        migrations.CreateModel(
            name='TechnicalTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('input_number', models.CharField(max_length=50, verbose_name='Вхідний номер')),
                ('input_date', models.DateField(verbose_name='Вхідна дата')),
                ('reviewed_by', models.CharField(max_length=255, verbose_name='Хто ознайомився')),
                ('review_result', models.CharField(choices=[('погоджено', 'Погоджено'), ('на доопрацювання', 'На доопрацювання'), ('чекаємо папір', 'Чекаємо папір')], default='погоджено', max_length=30, verbose_name='Результат розгляду')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітка')),
                ('oid', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='TechnicalTasks', to='oids.oid', verbose_name='ОІД')),
            ],
        ),
        migrations.CreateModel(
            name='Trip',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('start_date', models.DateField(verbose_name='Дата початку')),
                ('end_date', models.DateField(verbose_name='Дата завершення')),
                ('purpose', models.TextField(blank=True, null=True, verbose_name='Примітка')),
                ('oid', models.ManyToManyField(to='oids.oid', verbose_name='Які ОІД')),
                ('persons', models.ManyToManyField(to='oids.person', verbose_name='Відряджаються')),
                ('units', models.ManyToManyField(to='oids.unit', verbose_name='Військові частини')),
            ],
        ),
        migrations.CreateModel(
            name='OIDStatusChange',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('old_status', models.CharField(max_length=30, verbose_name='Попередній статус')),
                ('incoming_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='Вхідний номер документа')),
                ('new_status', models.CharField(max_length=30, verbose_name='Новий статус')),
                ('reason', models.TextField(blank=True, null=True, verbose_name='Причина зміни')),
                ('changed_by', models.CharField(max_length=100, verbose_name='Хто змінив')),
                ('changed_at', models.DateField(auto_now_add=True, verbose_name='Дата зміни')),
                ('oid', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.oid', verbose_name='ОІД')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.unit', verbose_name='Військова частина')),
            ],
        ),
        migrations.AddField(
            model_name='document',
            name='unit',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.unit', verbose_name='Військова частина'),
        ),
        migrations.AddField(
            model_name='attestationregistration',
            name='units',
            field=models.ManyToManyField(to='oids.unit', verbose_name='Військові частини'),
        ),
        migrations.CreateModel(
            name='WorkRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('work_type', models.CharField(choices=[('Атестація', 'Атестація'), ('ІК', 'ІК')], default='ІК', max_length=20, verbose_name='Тип роботи')),
                ('incoming_number', models.CharField(max_length=50, verbose_name='Вхідний номер заявки')),
                ('incoming_date', models.DateField(verbose_name='Дата заявки')),
                ('status', models.CharField(choices=[('створюється', 'Створюється'), ('атестована', 'атестована'), ('в експлуатації', 'В експлуатації'), ('обробка призупинена', 'обробка призупинена'), ('скасовано', 'скасовано')], default='створюється', max_length=30, verbose_name='Поточний стан ОІД')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітки')),
                ('oids', models.ManyToManyField(to='oids.oid', verbose_name='Об’єкти інформаційної діяльності')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.unit', verbose_name='Військова частина')),
            ],
        ),
        migrations.CreateModel(
            name='TripResultForUnit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('process_date', models.DateField(verbose_name='Дата відправки до частини')),
                ('attachment', models.FileField(blank=True, null=True, upload_to='trip_results_docs/', verbose_name='Файл (опційно)')),
                ('note', models.TextField(blank=True, null=True, verbose_name='Примітка')),
                ('documents', models.ManyToManyField(to='oids.document', verbose_name='Документи до відправки')),
                ('oids', models.ManyToManyField(to='oids.oid', verbose_name='ОІД призначення')),
                ('trip', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='oids.trip', verbose_name='Пов’язане відрядження')),
                ('units', models.ManyToManyField(to='oids.unit', verbose_name='Військові частини призначення')),
                ('related_request', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='oids.workrequest', verbose_name='Пов’язана заявка')),
            ],
        ),
        migrations.CreateModel(
            name='WorkRequestItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('work_type', models.CharField(choices=[('Атестація', 'Атестація'), ('ІК', 'ІК')], default='ІК', max_length=20, verbose_name='Тип роботи')),
                ('oid', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='oids.oid')),
                ('request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='oids.workrequest')),
            ],
        ),
    ]
